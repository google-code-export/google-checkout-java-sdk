<?xml version="1.0" encoding="UTF-8"?>
<project name="dist" default="zip" basedir=".">
  <description>builds the release distribution for this project.</description>
 
  <property name="release.version" value="0.8.2" />
 
  <import file="standalone-build.xml"/>
  
  <target name="zip" depends="init,compile,dist,javadoc">
    <property name="zipdist.dir" value="${build.dir}/tmpdist" />
    <property name="sdkdist.dir" 
              value="${zipdist.dir}/checkout-sdk-${release.version}" />
    <mkdir dir="${sdkdist.dir}" />
    <jar basedir="${build.classes.dir}" 
         zipfile="${sdkdist.dir}/checkout-sdk.jar"/>
    <copy file="docs/index.html" todir="${sdkdist.dir}" />
    <copy file="docs/release-notes.html" todir="${sdkdist.dir}" />
    <copy todir="${sdkdist.dir}">
      <fileset dir=".">
        <include name="web/**"/>
      </fileset>      
    </copy>
    <copy todir="${sdkdist.dir}/javadoc">
      <fileset dir="${javadoc.dir}" />
    </copy>
    <copy todir="${sdkdist.dir}/project">
      <fileset dir=".">
        <include name="src/**" />
        <include name=".settings" />
        <include name=".project" />
        <include name=".classpath" />
        <include name="**/nbproject/**" />
        <include name="build.xml"/>
        <include name="standalone-build.xml"/>
        <include name="**/test/**"/>
        <include name="**/web/**"/>
        <exclude name="**/build/**" />
        <exclude name="build.properties" />
        <exclude name="**/dist/**" />
        <exclude name="**/nbproject/private/**" />
        <exclude name="**/nbproject/genfiles.properties" />
      </fileset>
    </copy>
    <copy file="lib/build.properties.sample" 
          tofile="${sdkdist.dir}/project/build.properties" />
    <mkdir dir="${sdkdist.dir}/samples"/>
    <copy todir="${sdkdist.dir}/samples">
      <fileset dir="../samples">
        <exclude name="**/build/**" />
        <exclude name="**/dist/**" />
        <exclude name="**/nbproject/private/**" />
        <exclude name="**/build.properties" />
        <exclude name="**/nbproject/genfiles.properties" />
      </fileset>
    </copy>
    <mkdir dir="${dist.dir}"/>
    <zip zipfile="${dist.dir}/checkout-sdk-${release.version}.zip" 
         basedir="${zipdist.dir}" />
  </target>
</project>
