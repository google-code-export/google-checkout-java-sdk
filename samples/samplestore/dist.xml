<?xml version="1.0" encoding="UTF-8"?>
<project name="dist" default="zip" basedir=".">
  <description>builds the release distribution for this project.</description>
  <property name="release.version" value="0.2" />
 
  <import file="build.xml"/>
  
  <target name="zip" depends="init,compile,dist">
    <property name="zipdist.dir" value="${build.dir}/tmpdist" />
    <property name="storedist.dir" 
              value="${zipdist.dir}/store-${release.version}" />
    <mkdir dir="${storedist.dir}"/>
    
    <copy file="docs/index.html" todir="${storedist.dir}" />
    <copy file="docs/release-notes.html" todir="${storedist.dir}" />
    <copy file="${war.path}" todir="${storedist.dir}" />
    <copy todir="${storedist.dir}">
      <fileset dir=".">
        <include name="LICENSE"/>
        <include name="build.xml"/>
        <include name="www/**"/>
        <include name="bin/**"/>
        <include name="src/**"/>
      </fileset>      
    </copy>
    <copy file="build.properties.sample" 
          tofile="${storedist.dir}/build.properties" />
    
    <mkdir dir="${dist.dir}"/>
    <zip zipfile="${dist.dir}/store-${release.version}.zip" 
         basedir="${zipdist.dir}"/>
  </target>
</project>
